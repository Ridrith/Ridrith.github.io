<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grimdark Interactive Fiction</title>
    <style>
        /* General styles */
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Merriweather', serif;
            color: #f4f4f4;
            background-color: #0f0f0f;
        }

        /* Parallax effect container */
        .scene {
            position: relative;
            height: 100vh;
            overflow: hidden;
        }

        .parallax {
            position: absolute;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            will-change: transform;
        }

        /* UI styles */
        .story {
            position: absolute;
            bottom: 20%;
            left: 10%;
            right: 10%;
            padding: 20px;
            background: rgba(15, 15, 15, 0.8);
            border: 2px solid #a70000;
            box-shadow: 0 0 10px #a39453;
            border-radius: 10px;
        }

        .choices {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .choice {
            padding: 10px 20px;
            font-size: 16px;
            color: #f4f4f4;
            text-decoration: none;
            background: #a70000;
            border: none;
            border-radius: 5px;
            transition: background 0.3s ease;
        }

        .choice:hover {
            background: #f4f4f4;
            color: #a70000;
            cursor: pointer;
        }

        .stats, .inventory {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(15, 15, 15, 0.8);
            border: 2px solid #a70000;
            color: #f4f4f4;
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
        }

        .inventory {
            left: auto;
            right: 10px;
        }
    </style>
</head>
<body>
    <div id="game"></div>
    <div class="stats" id="stats">Stats: Stamina: 25, Vitality: 10, Morale: 100, Sanity: 100</div>
    <div class="inventory" id="inventory">Inventory: Empty</div>

    <audio id="ambientMusic" loop>
        <source src="path/to/ambient-music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        const player = {
            stamina: 25,
            vitality: 10,
            morale: 100,
            sanity: 100,
            inventory: [],
        };

        const updateStats = () => {
            const statsElement = document.getElementById('stats');
            statsElement.textContent = `Stats: Stamina: ${player.stamina}, Vitality: ${player.vitality}, Morale: ${player.morale}, Sanity: ${player.sanity}`;
        };

        const updateInventory = () => {
            const inventoryElement = document.getElementById('inventory');
            inventoryElement.textContent = `Inventory: ${player.inventory.length > 0 ? player.inventory.join(', ') : 'Empty'}`;
        };

        const scenes = [
            {
                id: "1",
                background: "path/to/your/image1.jpg",
                text: "You awaken in a desolate wasteland. The air is thick with ash.",
                choices: [
                    { text: "Venture into the ruins", nextScene: "2" },
                    { text: "Head towards the distant lights", nextScene: "3" }
                ],
                soundEffect: "path/to/sound1.mp3",
                onEnter: () => player.sanity -= 5,
            },
            {
                id: "2",
                background: "path/to/your/image2.jpg",
                text: "The ruins are hauntingly silent. Shadows move just out of sight.",
                choices: [
                    { text: "Investigate the shadows", nextScene: "4" },
                    { text: "Search for supplies", nextScene: "5" }
                ],
                soundEffect: "path/to/sound2.mp3",
                onEnter: () => player.inventory.push("Old Key"),
            },
            {
                id: "3",
                background: "path/to/your/image3.jpg",
                text: "The lights lead to an ominous fortress. An uneasy dread fills you.",
                choices: [
                    { text: "Approach the gates", nextScene: "6" },
                    { text: "Circle around", nextScene: "7" }
                ],
                soundEffect: "path/to/sound3.mp3",
            },
            // Additional placeholder scenes to extend to 20 total
            {
                id: "4",
                background: "path/to/your/image4.jpg",
                text: "You step closer to the shadows, feeling unseen eyes watching you.",
                choices: [
                    { text: "Confront the shadows", nextScene: "8" },
                    { text: "Flee back to safety", nextScene: "5" }
                ],
                soundEffect: "path/to/sound4.mp3",
            },
            {
                id: "5",
                background: "path/to/your/image5.jpg",
                text: "You find an abandoned satchel with a few supplies inside.",
                choices: [
                    { text: "Continue exploring", nextScene: "9" },
                    { text: "Return to the wasteland", nextScene: "1" }
                ],
                soundEffect: "path/to/sound5.mp3",
            },
            {
                id: "6",
                background: "path/to/your/image6.jpg",
                text: "The gates groan open as you approach, revealing a dark courtyard.",
                choices: [
                    { text: "Enter the courtyard", nextScene: "10" },
                    { text: "Retreat into the shadows", nextScene: "7" }
                ],
                soundEffect: "path/to/sound6.mp3",
            },
            {
                id: "7",
                background: "path/to/your/image7.jpg",
                text: "Circling the fortress, you find a hidden passageway.",
                choices: [
                    { text: "Enter the passageway", nextScene: "11" },
                    { text: "Return to the gates", nextScene: "6" }
                ],
                soundEffect: "path/to/sound7.mp3",
            },
            {
                id: "endWin",
                background: "path/to/your/victory.jpg",
                text: "You have reached the end of your journey. The truth is now yours to wield.",
                choices: [
                    { text: "Start Over", nextScene: "1" }
                ],
                soundEffect: "path/to/victory.mp3",
            },
            {
                id: "endFail",
                background: "path/to/your/fail.jpg",
                text: "You were no match for the monstrous form. Your story ends here.",
                choices: [
                    { text: "Try Again", nextScene: "1" }
                ],
                soundEffect: "path/to/fail.mp3",
            },
            // Placeholder for up to 20 scenes, with additional inventory, sound, and effects setup
        ];

        const ambientMusic = document.getElementById("ambientMusic");
        const soundEffect = new Audio();

        ambientMusic.volume = 0.5;
        ambientMusic.play();

        const renderScene = (sceneId) => {
            const scene = scenes.find(s => s.id === sceneId);
            const gameContainer = document.getElementById("game");

            if (scene.onEnter) scene.onEnter();
            updateStats();
            updateInventory();

            gameContainer.innerHTML = `
                <div class="scene">
                    <div class="parallax" style="background-image: url('${scene.background}');"></div>
                    <div class="story">
                        <p>${scene.text}</p>
                        <div class="choices">
                            ${scene.choices
                                .map(choice => `
                                <button class="choice" onclick="changeScene('${choice.nextScene}')">
                                    ${choice.text}
                                </button>`).join('')}
                        </div>
                    </div>
                </div>
            `;

            if (scene.soundEffect) {
                soundEffect.src = scene.soundEffect;
                soundEffect.play();
            }
        };

        const changeScene = (sceneId) => {
            renderScene(sceneId);
        };

        renderScene("1");
    </script>
</body>
</html>
