<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive Lorebook for TTRPG">
    <title>Interactive Lorebook</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #a39453;
        }
        .search-bar {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .search-bar input {
            width: 80%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #a39453;
            border-radius: 5px;
            background-color: #2b2b2b;
            color: #f4f4f4;
        }
        .entry {
            margin-bottom: 20px;
            border: 1px solid #a39453;
            border-radius: 5px;
            background-color: #1e1e1e;
            padding: 15px;
            transition: transform 0.2s;
        }
        .entry:hover {
            transform: scale(1.02);
        }
        .entry-title {
            font-size: 1.5em;
            color: #a70000;
        }
        .entry-content {
            margin-top: 10px;
            line-height: 1.6;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Interactive Lorebook</h1>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search lore...">
        </div>
        <div id="loreEntries">
            <!-- Entries will be dynamically loaded -->
        </div>
    </div>

    <script>
        const searchInput = document.getElementById('searchInput');
        const loreContainer = document.getElementById('loreEntries');

        // Function to load data from Notion public page
        async function fetchLoreFromNotion() {
            try {
                const response = await fetch('https://ohrgames.notion.site/727a3636538a4584808b9e5632a8d3e2?v=8e3f8d259f1742a0b43ad4cdaf3294c3&pvs=4');
                if (!response.ok) throw new Error('Failed to fetch Notion data');
                
                // This example assumes a static structure; refine based on actual Notion data format.
                // Parse Notion data and populate entries dynamically.

                const mockEntries = [
                    {
                        title: "The Fall of Elarion",
                        content: "Elarion, once the shining jewel of the eastern kingdoms, fell to ruin during the Age of Dread. Its ruins now lie haunted by the ghosts of its people, whispering their lament to those who dare enter."
                    },
                    {
                        title: "The Red Blade",
                        content: "An infamous weapon said to have been forged in the blood of a dying star. It grants immense power to its wielder but slowly consumes their soul."
                    },
                    {
                        title: "The Council of Seven",
                        content: "A shadowy group of powerful mages who once ruled from behind the thrones of kings. Their whereabouts are now unknown, but their influence lingers in every corner of the realm."
                    }
                ];

                mockEntries.forEach(entry => {
                    const entryDiv = document.createElement('div');
                    entryDiv.classList.add('entry');
                    entryDiv.innerHTML = `
                        <div class="entry-title">${entry.title}</div>
                        <div class="entry-content">${entry.content}</div>
                    `;
                    loreContainer.appendChild(entryDiv);
                });
            } catch (error) {
                console.error('Error loading Notion data:', error);
            }
        }

        searchInput.addEventListener('input', () => {
            const query = searchInput.value.toLowerCase();
            const entries = document.querySelectorAll('.entry');

            entries.forEach(entry => {
                const title = entry.querySelector('.entry-title').textContent.toLowerCase();
                const content = entry.querySelector('.entry-content').textContent.toLowerCase();

                if (title.includes(query) || content.includes(query)) {
                    entry.classList.remove('hidden');
                } else {
                    entry.classList.add('hidden');
                }
            });
        });

        fetchLoreFromNotion();
    </script>
</body>
</html>
